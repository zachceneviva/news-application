<!DOCTYPE html>
<html lang="en">
<head>
    
    <%- include('../partials/header.ejs', {page: 'User Dashboard'}) %>

</head>
<body>
    <%- include('../partials/nav.ejs') %>


    <!-- written articles -->
    <div class="content">
        <div class="article-content">
            <div class="user-header">
                <h1>
                    <%= user.fname %>'s Page
                </h1>
            </div>
            <h3 class="<%= (user.role === 'Reader') ? 'd-none' : 'user-subheader' %> ">Stories Written</h3>
                <% for(let i=user.writtenArticles.length - 1; i >= 0; i--){ %>
                <div class="auth-date-views">
                    <div class="author-date">
                        <p class="author">
                            <%= user.writtenArticles[i].author %>
                        </p>

                        <p class="date">
                            <%= user.writtenArticles[i].date %> - <%= user.writtenArticles[i].topic %>
                        </p>
                    </div>
                    <div class="views">
                        <p>
                            Views: <%= user.writtenArticles[i].views %>
                        </p>
                    </div>
                </div>
                    <h1 class="title">
                        <%= user.writtenArticles[i].title %>
                    </h1>

                    <img src="<%= user.writtenArticles[i].articleImage %>" alt="Placeholder image" class="article-image" />

                    <p class="quick-look">
                        <b><em>Quick Look: </em></b> <%= user.writtenArticles[i].quickLook %>
                    </p>

                    <a href="/<%= user.writtenArticles[i].id %>" class="article-link">Go Deeper <i class="bi bi-arrow-right"></i></a>
                    <hr>
                    <% } %>
            </div>

            <!-- liked articles -->
            <div class="article-content">
                <h3 class="user-subheader">Stories Liked</h3>
                <% for(let i=user.likedArticles.length - 1; i >= 0; i--){ %>
                <div class="auth-date-views">
                    <div class="author-date">
                        <p class="author">
                            <%= user.likedArticles[i].author %>
                        </p>

                        <p class="date">
                            <%= user.likedArticles[i].date %> - <%= user.likedArticles[i].topic %>
                        </p>
                    </div>
                    <div class="views">
                        <p>
                            Views: <%= user.likedArticles[i].views %>
                        </p>
                    </div>
                </div>
                    <h1 class="title">
                        <%= user.likedArticles[i].title %>
                    </h1>

                    <img src="<%= user.likedArticles[i].articleImage %>" alt="Placeholder image" class="article-image" />

                    <p class="quick-look">
                        <b><em>Quick Look: </em></b> <%= user.likedArticles[i].quickLook %>
                    </p>

                    <a href="/<%= user.likedArticles[i].id %>" class="article-link">Go Deeper <i class="bi bi-arrow-right"></i></a>
                    <hr>
                    <% } %>
            </div>
    </div>

    <%- include('../partials/footer.ejs') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
</body>
</html>